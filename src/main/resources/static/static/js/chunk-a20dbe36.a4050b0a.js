(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a20dbe36"],{7677:function(e,t,a){"use strict";a("868c")},"868c":function(e,t,a){},9406:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"dashboard-text"},[e._v("go go go")]),[a("el-select",{attrs:{clearable:"",placeholder:"请选择当日计划"},on:{clear:e.clearSelect},model:{value:e.event,callback:function(t){e.event=t},expression:"event"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{type:"primary"},on:{click:e.createEvent}},[e._v("创建计划")]),null!==e.event?a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"待办标题"}},[a("el-input",{staticStyle:{width:"12%"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"待办类型"}},[a("el-select",{staticStyle:{width:"12%"},attrs:{placeholder:"请选择计划类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"重要紧急",value:"4"}}),a("el-option",{attrs:{label:"重要不紧急",value:"3"}}),a("el-option",{attrs:{label:"不重要紧急",value:"2"}}),a("el-option",{attrs:{label:"不重要不紧急",value:"1"}})],1)],1),a("el-form-item",{staticStyle:{width:"12%"},attrs:{label:"开始时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.startDate,callback:function(t){e.$set(e.form,"startDate",t)},expression:"form.startDate"}})],1)],1),a("el-form-item",{staticStyle:{width:"12%"},attrs:{label:"结束时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.endDate,callback:function(t){e.$set(e.form,"endDate",t)},expression:"form.endDate"}})],1)],1),a("el-form-item",{attrs:{label:"已完成"}},[a("el-switch",{model:{value:e.form.eventComplete,callback:function(t){e.$set(e.form,"eventComplete",t)},expression:"form.eventComplete"}})],1),a("el-form-item",{attrs:{label:"待办内容","inline-message":""}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.descData,callback:function(t){e.$set(e.form,"descData",t)},expression:"form.descData"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{type:"primary"},on:{click:e.onDelete}},[e._v("删除")])],1)],1):e._e()],a("el-calendar",{scopedSlots:e._u([{key:"dateCell",fn:function(t){t.date;var n=t.data;return[a("p",e._b({class:n.isSelected?"is-selected":""},"p",n.isSelected?e.setDate(n):"",!1),[e._v(" "+e._s(n.isSelected?"":n.day.split("-").slice(1).join("-")+e.getTodoInfo(n.day))+" ")]),a("p",{class:n.isSelected?"is-selected":"is-not-selected"},[e._v(" "+e._s(n.isSelected?e.getFullInfo(n.day):e.getSimpleInfo(n.day))+" ")])]}}])}),a("div")],2)},r=[],l=(a("baa5"),a("b85c")),i=a("5530"),o=a("2f62"),s=a("b775");function c(e){var t=null!=e.id?e.id:10;return Object(s["a"])({url:"/event/save/"+t,method:"post",data:e})}function f(e){return Object(s["a"])({url:"/event/delete/"+e,method:"get"})}function u(){return Object(s["a"])({url:"/events",method:"get"})}var d=a("61f7"),v={name:"Dashboard",data:function(){return{lastDay:"",listLoading:!1,event:null,events:[],options:[],form:{id:-1,title:"",type:"",startDate:"",endDate:"",eventComplete:!1,descData:""}}},computed:Object(i["a"])({},Object(o["b"])(["name"])),watch:{event:function(e){this.onChangeEvent(e)}},created:function(){this.initAllEvent()},methods:{initAllEvent:function(){var e=this;u().then((function(t){e.events=t.data}))},onDelete:function(){var e=this,t=this;null!=t.form.id?f(t.form.id).then((function(){t.listLoading=!1,e.initAllEvent(),e.form={}})):this.$message({message:"没有生成事件id",type:"error"})},onSubmit:function(){var e=this;if("success"!==Object(d["b"])(this.form))this.$message({message:Object(d["b"])(this.form),type:"warning"});else{var t=this;t.listLoading=!0,c(t.form).then((function(a){t.form.id=a.data,t.listLoading=!1,e.initAllEvent()}))}},onChangeEvent:function(e){if(null!=e&&"新计划"!==e){var t,a=Object(l["a"])(this.events);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.id!==e&&n.id+""!==e||(this.form=n)}}catch(r){a.e(r)}finally{a.f()}}},clearSelect:function(){this.event=null,this.form={}},createEvent:function(){this.event="新计划",this.form={}},setDate:function(e){var t,a=[],n=0,r=Object(l["a"])(this.events);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.isInDay(e.day,i)&&(a[n++]=i)}}catch(u){r.e(u)}finally{r.f()}if(a.length>0){var o=[a.length];n=0;var s,c=Object(l["a"])(a);try{for(c.s();!(s=c.n()).done;){var f=s.value;o[n++]={value:f.id,label:f.title}}}catch(u){c.e(u)}finally{c.f()}this.options=o}this.lastDay!==e.day&&(this.$message({message:e.day+" 今日待办事件: "+this.getFullInfo(e.day),type:"info"}),this.lastDay=e.day)},isInDay:function(e,t){var a=t.startDate,n=t.endDate,r=e>a,l=e<n;return r&&l},getTodoInfo:function(e){var t,a=0,n=Object(l["a"])(this.events);try{for(n.s();!(t=n.n()).done;){var r=t.value;!r.eventComplete&&this.isInDay(e,r)&&a++}}catch(i){n.e(i)}finally{n.f()}return 0===a?"":"  待办 : "+a},getSimpleInfo:function(e){var t,a=0,n=0,r=0,i=Object(l["a"])(this.events);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(!o.eventComplete&&this.isInDay(e,o))switch(o.type){case 2:r++;break;case 3:n++;break;case 4:a++;break}}}catch(c){i.e(c)}finally{i.f()}var s=(0===a?"":"紧要:"+a+",")+(0===n?"":"重要:"+n+",")+(0===r?"":"紧急:"+r+",");return s=s.substring(0,s.lastIndexOf(",")),s},getFullInfo:function(e){var t,a="",n=0,r=Object(l["a"])(this.events);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.isInDay(e,i)&&(0!==n++&&(a+=","),a+=i.title)}}catch(o){r.e(o)}finally{r.f()}return a}}},m=v,h=(a("7677"),a("2877")),p=Object(h["a"])(m,n,r,!1,null,"66053e23",null);t["default"]=p.exports},b85c:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),a("a630"),a("fb6a"),a("b0c0"),a("25f0");function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function r(e,t){if(e){if("string"===typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}function l(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=r(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}}}},baa5:function(e,t,a){var n=a("23e7"),r=a("e58c");n({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},e58c:function(e,t,a){"use strict";var n=a("fc6a"),r=a("a691"),l=a("50c4"),i=a("a640"),o=a("ae40"),s=Math.min,c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0,u=i("lastIndexOf"),d=o("indexOf",{ACCESSORS:!0,1:0}),v=f||!u||!d;e.exports=v?function(e){if(f)return c.apply(this,arguments)||0;var t=n(this),a=l(t.length),i=a-1;for(arguments.length>1&&(i=s(i,r(arguments[1]))),i<0&&(i=a+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}:c}}]);