<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Canvas-Chart</title>
    <script type="text/javascript" src="/js/jquery-3.1.1.js"></script>
    <script type="text/javascript" src="/js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="/js/draw.js"></script>
    <script type="text/javascript" src="/js/select.js"></script>
</head>
<body>
        <a href="http://127.0.0.1:8080/exams/student.html">查询单个同学分数排名情况</a>
        <a href="http://127.0.0.1:8080/exams/students.html">查询全班分数排名情况</a>
        <a href="http://127.0.0.1:8080/exam/exams.html">查询班级考试整体信息</a>
        <a href="http://127.0.0.1:8080/exam/scorelist.html">查询班级考试整体信息</a>

        <div class="demo">
            <ul id="list">
                <li><label><input type="checkbox" value="满分数"> 满分数</label></li>
                <li><label><input type="checkbox" value="a等数量"> a等数量</label></li>
                <li><label><input type="checkbox" value="b等数量"> b等数量</label></li>
                <li><label><input type="checkbox" value="c等数量"> c等数量</label></li>
                <li><label><input type="checkbox" value="d等数量"> d等数量</label></li>
                <li><label><input type="checkbox" value="a等率"> a等率</label></li>
                <li><label><input type="checkbox" value="b等率"> b等率</label></li>
                <li><label><input type="checkbox" value="c等率"> c等率</label></li>
                <li><label><input type="checkbox" value="d等率"> d等率</label></li>
                <li><label><input type="checkbox" value="平均分"> 平均分</label></li>
                <li><label><input type="checkbox" value="满分数"> 满分数</label></li>
                <li><label><input type="checkbox" value="考试人数"> 考试人数</label></li>
                <li><label><input type="checkbox" value="缺考数"> 缺考数</label></li>
            </ul>
            <input type="checkbox" id="all">
            <input type="button" value="全选" class="btn" id="selectAll">
            <input type="button" value="全不选" class="btn" id="unSelect">
            <input type="button" value="反选" class="btn" id="reverse">
            <input type="button" value="获得选中的所有值" class="btn" id="getValue">
        </div>

        <form >
            班级: <input type="text" id="classId" name="classId" /><br />
            年级:<input type="text" id="grade" name="grade"  /><br />

            <input id="findScore" type="button" value="查询成绩" />
            <input id="clear" type="button" value="清除" />
        </form>
    </div>

    <div style="margin:0 auto; width:1960px; height:1080px; border:1px solid #ccc;">
        <canvas id="myCanvas" width="1960" height="1080"></canvas>
    </div>


<script type="text/javascript">
    let url = window.location.href; /* 获取完整URL */

    $(document).ready(function(){
        $("#ref").click(function(){
            //按钮只可以被点击一次
            $.get(url);
        });
    });

    $(document).ready(function(){
        $("#findScore").click(function(){
            let classId = document.getElementById("classId").value;
            let grade = document.getElementById("grade").value;
            let value = getValue();
            $.getJSON(
                "class?needPrams="+value+"&grade="+grade+"&classId="+classId,//服务器地址
                function(result) {
                    let data = result
                    line(data,"myCanvas")
                }
            );
        });
    });

    $(function () {
        //全选或全不选
        $("#all").click(function(){
            changeAll();
        });
        //全选
        $("#selectAll").click(function () {
            selectAll();
        });
        //全不选
        $("#unSelect").click(function () {
            unSelect();
        });
        //反选
        $("#reverse").click(function () {
            reverse();
        });

        //设置全选复选框
        $("#list :checkbox").click(function(){
            allchk();
        });

        //获取选中选项的值
        $("#getValue").click(function(){
            let val = getValue();
            alert(val);
        });
    });

    $(document).ready(function(){
        $("#clear").click(function(){
            clear("myCanvas");
            clear("myCanvas2");
        });
    });
</script>
</body>
</html>