<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Canvas-Chart</title>
    <script type="text/javascript" src="../js/jquery-3.1.1.js"></script>
    <script type="text/javascript" src="../js/draw.js"></script>

</head>
<body>
    <div>
        <a href="http://127.0.0.1:8080/exams/student.html">查询单个同学分数排名情况</a>
        <a href="http://127.0.0.1:8080/exams/students.html">查询全班分数排名情况</a>
        <a href="http://127.0.0.1:8080/exam/exams.html">查询班级考试整体信息</a>
        <a href="http://127.0.0.1:8080/exam/scorelist.html">查询班级考试整体信息</a>

        <form >
            班级:<input type="text" id="classId" name="classId" /><br />
            年级:<input type="text" id="grade" name="grade" value="2017"/><br />

            <input id="findStudents" type="button" value="查询学生表" />
            <input id="findExams" type="button" value="查询年级考试信息" />
            <input id="clear" type="button" value="清除" />
        </form>
    </div>

    <table>
        <tbody id="tbody1"></tbody>
    </table>

<script type="text/javascript">

    $(document).ready(function(){
        $(this).attr('disabled', 1);
        $("#findExams").click(function(){
            //按钮只可以被点击一次
            let classId = document.getElementById("classId").value;
            let grade = document.getElementById("grade").value;
            $.getJSON(
                "/data/exams?classId="+classId+"&grade="+grade,//服务器地址
                function(result) {
                    creatTable(result)
                }
            );
        });
    });

    $(document).ready(function(){
        $(this).attr('disabled', 1);
        $("#findStudents").click(function(){
            //按钮只可以被点击一次
            let classId = document.getElementById("classId").value;
            let grade = document.getElementById("grade").value;
            $.getJSON(
                "/data/students?classId="+classId+"&grade="+grade,//服务器地址
                function(result) {
                    creatTable(result)
                }
            );
        });
    });

    $(document).ready(function(){
        $("#clear").click(function(){
            clear("myCanvas");
            clear("myCanvas2");
        });
    });




    function creatTable(dates){
        let tbody = document.querySelector('tbody');
        for (let i = 0;i<dates.length;i++){
            let tr = document.createElement('tr');
          tbody.appendChild(tr);
          for(let k in dates[i]){//里面的for循环 td
              //创建单元格
              let td = document.createElement('td');
              //把对象里面的属性值，给td
              td.innerHTML = dates[i][k];
              tr.appendChild(td);
          }
      }
    }

</script>
</body>
</html>